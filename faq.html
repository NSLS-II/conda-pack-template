

<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Frequently Asked Questions &#8212; conda-pack-template  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>

    
    
     
        <script src="_static/jquery.cookie.js"></script>
    

    
     
        <script src="_static/cloud.base.js"></script>
    

    
     
        <script src="_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">conda-pack-template  documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Frequently Asked Questions</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading">¶</a></h1>
<section id="synchronize-environment-files">
<h2>Synchronize environment files<a class="headerlink" href="#synchronize-environment-files" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">nsls2-collection</span></code> and <code class="docutils literal notranslate"><span class="pre">nsls2-collection-tiled</span></code> repositories are very
similar in terms of the packages and should be updated in tandem. The
difference is only in the <code class="docutils literal notranslate"><span class="pre">databroker</span></code> package which should have versions
<code class="docutils literal notranslate"><span class="pre">&gt;=1.2.5,&lt;2.0.0a</span></code> in the <code class="docutils literal notranslate"><span class="pre">nsls2-collection</span></code> repository, and <code class="docutils literal notranslate"><span class="pre">&gt;=2.0.0b</span></code> in
the <code class="docutils literal notranslate"><span class="pre">nsls2-collection-tiled</span></code> repository. The former is also coming with the
<code class="docutils literal notranslate"><span class="pre">databroker-pack</span></code> and <code class="docutils literal notranslate"><span class="pre">intake</span></code> packages while the latter contains the
<code class="docutils literal notranslate"><span class="pre">tiled</span></code> package (hence the repository name).</p>
<p>When creating a new version of the conda environments, e.g. <code class="docutils literal notranslate"><span class="pre">2023-3.0-py310</span></code>,
one would create a new feature branch from <code class="docutils literal notranslate"><span class="pre">main</span></code>, then update the
<code class="docutils literal notranslate"><span class="pre">configs/config-py310.yml</span></code> file with the corresponding version as well as the
<code class="docutils literal notranslate"><span class="pre">envs/env-py310.yml</span></code> file with the new pins of the existing packages and/or
new packages. Once this was done for one repository (preferably via one
commit), e.g. for <code class="docutils literal notranslate"><span class="pre">nsls2-collection</span></code>, create a patch file as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>format-patch<span class="w"> </span>-1
</pre></div>
</div>
<p>This will produce a file such as <code class="docutils literal notranslate"><span class="pre">0001-2023-3.0-env.patch</span></code>. Then, navigate to
another repository (<code class="docutils literal notranslate"><span class="pre">nsls2-collection-tiled</span></code>) and apply this patch as
follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>patch<span class="w"> </span>-p1<span class="w"> </span>&lt;<span class="w"> </span>../nsls2-collection/0001-2023-3.0-env.patch
</pre></div>
</div>
<p>This may result in an incomplete application of the patch, as there may be
conflicting changes applied to both repositories in the same files/places
(e.g., the environment names will be <code class="docutils literal notranslate"><span class="pre">2023-3.0-py310</span></code> vs.
<code class="docutils literal notranslate"><span class="pre">2023-3.0-py310-tiled</span></code> in both config and environment files). Nevertheless,
the rest of the updates will be applied correctly. You may consider separating
commits for the environment version update and the packages version update to
reduce the number of conflicts.</p>
<p>It is recommended always to check the difference between the repositories.
Change to the common directory where both repositories are cloned and then run
the command such as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>diff<span class="w"> </span>nsls2-collection/envs/env-py310.yml<span class="w"> </span>nsls2-collection-tiled/envs/env-py310.yml
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#synchronize-environment-files">Synchronize environment files</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nsls2-conda-envs/conda-pack-template">conda-pack-template GitHub repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://conda.github.io/conda-pack">conda-pack docs</a></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">conda-pack-template  documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Frequently Asked Questions</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2022, Brookhaven National Laboratory.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>